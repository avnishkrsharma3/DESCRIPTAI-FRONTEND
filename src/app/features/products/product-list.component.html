<div class="container">
  <h1>Product Catalog</h1>
  <button type="button" (click)="logout()">Logout</button>
  <!-- Filters Section -->
  <div class="filters">
    <!-- Search Input -->
    <div class="search-box">
      <input
        type="text"
        class="search-input"
        placeholder="Search products..."
        [(ngModel)]="searchQuery"
        (keyup.enter)="onSearch()"
      />
      <button class="btn btn-primary" (click)="onSearch()">Search</button>
    </div>

    <!-- Category Filter -->
    <div class="filter-group">
      <label for="category-filter">Category</label>
      <select id="category-filter" [(ngModel)]="selectedCategory" (change)="applyFilters()">
        <option value="all">All Categories</option>
        <option *ngFor="let category of categories" [value]="category">
          {{ category }}
        </option>
      </select>
    </div>

    <!-- Clear Filters -->
    <button class="btn clear-button" (click)="clearFilters()">Clear Filters</button>
  </div>


  <!-- Selection Toolbar -->
  <div class="selection-toolbar" [class.show]="selectedProducts.length > 0">
    <div class="selected-count">
      {{ selectedProducts.length }} product(s) selected
    </div>
    <div class="actions">
        <button class="btn btn-primary" (click)="toggleSelectAll()" >
            Select All
        </button>
        <button class="btn btn-primary" (click)="generateDescriptions()" [disabled]="selectedProducts.length === 0">
            Generate Descriptions
        </button>
        <button class="btn clear-button" (click)="clearSelection()">
          Clear Selection
        </button>
    </div>
  </div>



  <!-- Loading Spinner -->
  <div *ngIf="loading" class="loading">
    <div class="spinner">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
    <p>Loading products...</p>
  </div>

  <!-- Products Grid -->
  <div *ngIf="!loading && filteredProducts.length > 0" class="products-grid">
    <div *ngFor="let product of filteredProducts" class="product-card" [class.selected]="isSelected(product)" (click)="toggleSelection(product)">
      <div class="product-image-container">
        <img [src]="product.thumbnail" [alt]="product.title" class="product-image" />
      </div>
      <div class="product-info">
        <h3>{{ product.title }}</h3>
        <div class="brand-category">
          <span class="brand">{{ product.brand }}</span>
          <span>|</span>
          <span class="category">{{ product.category }}</span>
        </div>
        <p class="description">{{ product.description }}</p>
        <div class="product-footer">
          <span class="price">${{ product.price }}</span>
          <span class="rating" *ngIf="product.rating">‚≠ê {{ product.rating }}</span>
        </div>
      </div>
      <div class="selection-overlay">
        <input
          type="checkbox"
          class="product-checkbox"
          [id]="'checkbox-' + product.id"
          [checked]="isSelected(product)"
          (change)="toggleSelection(product)"
          (click)="$event.stopPropagation()"
        />
        <label [for]="'checkbox-' + product.id" class="product-checkbox-label">Selected</label>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="!loading && filteredProducts.length === 0" class="empty-state">
    <div class="empty-state-icon">üòï</div>
    <p>No products found matching your criteria.</p>
    <span>Try adjusting your filters or search terms.</span>
  </div>
</div>